<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    
    <!-- âœ… FIXED: Proper favicon preload with correct attributes -->
    <link rel="preload" href="%PUBLIC_URL%/favicon.ico" as="image" type="image/x-icon">
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#667eea" />
    
    <!-- âœ… Enhanced SEO Meta Tags -->
    <meta name="description" content="Wilson Muita - Technology, Programming, and Web Development Insights. High-quality articles on React, Node.js, JavaScript, and modern web development." />
    <meta name="keywords" content="technology, programming, web development, react, node.js, javascript, tutorials, wilson muita, software engineering, coding, frontend, backend" />
    <meta name="author" content="Wilson Muita" />
    <meta name="robots" content="index, follow, max-image-preview:large" />
    <meta name="copyright" content="Wilson Muita" />
    <meta name="language" content="en" />
    <meta name="revisit-after" content="7 days" />
    <meta name="rating" content="general" />
    <meta name="distribution" content="global" />
    
    <!-- âœ… Open Graph Meta Tags for Social Sharing -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Wilson Muita - Technology & Programming Blog" />
    <meta property="og:description" content="Expert insights on web development, programming tutorials, and technology trends. Learn React, Node.js, JavaScript and more." />
    <meta property="og:image" content="%PUBLIC_URL%/default-og-image.jpg" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:image:alt" content="Wilson Muita - Technology & Programming Blog" />
    <meta property="og:url" content="https://wilsonmuita.com" />
    <meta property="og:site_name" content="Wilson Muita" />
    <meta property="og:locale" content="en_US" />
    
    <!-- âœ… Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Wilson Muita - Technology & Programming Blog" />
    <meta name="twitter:description" content="Expert insights on web development, programming tutorials, and technology trends." />
    <meta name="twitter:image" content="%PUBLIC_URL%/default-og-image.jpg" />
    <meta name="twitter:image:alt" content="Wilson Muita - Technology & Programming Blog" />
    <meta name="twitter:creator" content="@WilsonMuit48811" />
    <meta name="twitter:site" content="@WilsonMuit48811" />
    
    <!-- âœ… Facebook Meta Tags -->
    <meta property="fb:app_id" content="" />
    
    <!-- âœ… Critical Preconnect for Performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://pagead2.googlesyndication.com">
    <link rel="preconnect" href="https://api.wilsonmuita.com">
    
    <!-- âœ… FIXED: Safer config.js preload approach -->
    <link rel="preload" href="%PUBLIC_URL%/config.js" as="script">
    
    <!-- âœ… Google Fonts - Load without preload to avoid warnings -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- âœ… Structured Data for SEO (JSON-LD) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Wilson Muita",
      "description": "Technology, Programming, and Web Development Insights - Expert tutorials on React, Node.js, JavaScript and modern web technologies",
      "url": "https://wilsonmuita.com",
      "inLanguage": "en-US",
      "publisher": {
        "@type": "Organization",
        "name": "Wilson Muita",
        "logo": {
          "@type": "ImageObject",
          "url": "https://wilsonmuita.com/logo.png",
          "width": "180",
          "height": "60"
        },
        "sameAs": [
          "https://twitter.com/WilsonMuit48811",
          "https://github.com/wilsonmuita"
        ]
      },
      "potentialAction": {
        "@type": "SearchAction",
        "target": {
          "@type": "EntryPoint",
          "urlTemplate": "https://wilsonmuita.com/search?q={search_term_string}"
        },
        "query-input": "required name=search_term_string"
      }
    }
    </script>

    <!-- âœ… Additional Structured Data for Organization -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "Wilson Muita",
      "url": "https://wilsonmuita.com",
      "logo": "https://wilsonmuita.com/logo.png",
      "description": "Technology, Programming, and Web Development Insights",
      "sameAs": [
        "https://twitter.com/WilsonMuit48811",
        "https://github.com/wilsonmuita",
        "https://linkedin.com/in/wilsonmuita"
      ],
      "contactPoint": {
        "@type": "ContactPoint",
        "email": "wilsonmuita41@gmail.com",
        "contactType": "customer service"
      }
    }
    </script>
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/default-og-image.jpg" />
    <link rel="apple-touch-icon" sizes="57x57" href="%PUBLIC_URL%/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="%PUBLIC_URL%/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="%PUBLIC_URL%/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="%PUBLIC_URL%/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="%PUBLIC_URL%/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="%PUBLIC_URL%/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="%PUBLIC_URL%/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="%PUBLIC_URL%/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="%PUBLIC_URL%/apple-icon-180x180.png">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://wilsonmuita.com" />
    
    <!-- Alternate Languages -->
    <link rel="alternate" hreflang="en" href="https://wilsonmuita.com" />
    <link rel="alternate" hreflang="x-default" href="https://wilsonmuita.com" />
    
    <!-- RSS Feed -->
    <link rel="alternate" type="application/rss+xml" title="Wilson Muita RSS Feed" href="https://wilsonmuita.com/rss.xml" />
    
    <!-- AMP HTML -->
    <link rel="amphtml" href="https://wilsonmuita.com/amp" />
    
    <!-- Web App Manifest -->
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    
    <!--
      Notice the use of %PUBLIC_URL% in the tags above.
      It will be replaced with the URL of the `public` folder during the build.
      Only files inside the `public` folder can be referenced from the HTML.

      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
      work correctly both with client-side routing and a non-root public URL.
      Learn how to configure a non-root public URL by running `npm run build`.
    -->
    
    <!-- âœ… Microsoft Clarity Heatmap & Analytics -->
    <script type="text/javascript">
      (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
      })(window, document, "clarity", "script", "tmnk4u8wvm");
    </script>

    <!-- âœ… CRITICAL FIX: Google AdSense with correct URL (fixed missing .com) -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4047817727348673"
     crossorigin="anonymous"></script>

    <title>Wilson Muita - Technology, Programming & Web Development Blog</title>

    <!-- âœ… Critical CSS (Inline for performance) -->
    <style>
      /* Critical above-the-fold styles */
      body {
        margin: 0;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
          'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
          sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        background: #ffffff;
        color: #2d3748;
        line-height: 1.6;
      }

      /* Font fallback until Inter loads */
      @font-face {
        font-family: 'Inter';
        font-style: normal;
        font-weight: 400;
        font-display: swap;
        src: local('Inter Regular'), local('Inter-Regular');
      }

      .font-inter-loaded body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      }

      #root {
        min-height: 100vh;
      }

      /* Loading animation */
      .app-loading {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        flex-direction: column;
        gap: 1rem;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      }

      .loading-spinner {
        width: 40px;
        height: 40px;
        border: 4px solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        border-top-color: #fff;
        animation: spin 1s ease-in-out infinite;
      }

      @keyframes spin {
        to { transform: rotate(360deg); }
      }

      /* AdSense Styles */
      .ad-container {
        margin: 30px 0;
        text-align: center;
        position: relative;
      }

      .ad-label {
        font-size: 11px;
        color: #666;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-top: 8px;
        text-align: center;
      }

      /* Responsive ads */
      @media (max-width: 768px) {
        .ad-container {
          margin: 20px 0;
        }
      }

      /* Ensure ads don't break layout */
      .adsbygoogle {
        border-radius: 8px;
        overflow: hidden;
      }

      /* No JavaScript styles */
      .no-js-container {
        text-align: center;
        padding: 3rem;
        font-family: Arial, sans-serif;
        background: #f7fafc;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
      }
    </style>
  </head>
  <body>
    <!-- âœ… No JavaScript Fallback -->
    <noscript>
      <div class="no-js-container">
        <div style="max-width: 600px;">
          <h1 style="color: #2d3748; margin-bottom: 1rem;">JavaScript Required</h1>
          <p style="color: #4a5568; line-height: 1.6; margin-bottom: 2rem;">
            You need to enable JavaScript to run this application. Our blog uses modern web technologies 
            to provide the best reading experience with fast loading times and interactive features.
          </p>
          <div style="background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
            <h3 style="color: #2d3748; margin-bottom: 1rem;">About Wilson Muita Blog</h3>
            <p style="color: #4a5568; line-height: 1.6;">
              Welcome to my technology blog where I share insights on web development, programming tutorials, 
              and the latest technology trends. I write about React, Node.js, JavaScript, and modern web technologies.
            </p>
            <p style="color: #4a5568; line-height: 1.6; margin-top: 1rem;">
              You can contact me at <a href="mailto:wilsonmuita41@gmail.com" style="color: #667eea;">wilsonmuita41@gmail.com</a>
            </p>
          </div>
          <div style="margin-top: 2rem; color: #718096; font-size: 0.9rem;">
            <p>Â© 2025 Wilson Muita. All rights reserved.</p>
          </div>
        </div>
      </div>
    </noscript>

    <!-- âœ… Loading State (shown until React loads) -->
    <div id="root">
      <div class="app-loading">
        <div class="loading-spinner"></div>
        <div style="text-align: center;">
          <h2 style="margin: 0 0 0.5rem 0; font-weight: 600;">Wilson Muita</h2>
          <p style="margin: 0; opacity: 0.8;">Loading your experience...</p>
        </div>
      </div>
    </div>

    <!--
      This HTML file is a template.
      If you open it directly in the browser, you will see an empty page.

      You can add webfonts, meta tags, or analytics to this file.
      The build step will place the bundled scripts into the <body> tag.

      To begin the development, run `npm start` or `yarn start`.
      To create a production bundle, use `npm run build` or `yarn build`.
    -->
    
    <!-- âœ… Load config after DOM is ready -->
    <script src="%PUBLIC_URL%/config.js"></script>
    
    <!-- âœ… Google Analytics (Optional - Add your own ID) -->
    <!--
    <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'GA_MEASUREMENT_ID');
    </script>
    -->
    
    <!-- âœ… Performance & Error Tracking Script -->
    <script>
      // Remove loading state when React app starts
      window.addEventListener('DOMContentLoaded', function() {
        const loadingElement = document.querySelector('.app-loading');
        if (loadingElement) {
          // React will remove this when it mounts
          setTimeout(() => {
            if (loadingElement.parentNode) {
              loadingElement.style.display = 'none';
            }
          }, 3000); // Fallback hide after 3 seconds
        }
        
        // Add font-loaded class when Inter font loads
        const interFont = new FontFace('Inter', 'url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7SUc.woff2)');
        interFont.load().then(function(loadedFont) {
          document.documentElement.classList.add('font-inter-loaded');
        }).catch(function(error) {
          console.log('Inter font loading failed:', error);
        });
      });

      // Performance monitoring
      if ('performance' in window) {
        window.addEventListener('load', function() {
          setTimeout(function() {
            const perfData = window.performance.timing;
            const loadTime = perfData.loadEventEnd - perfData.navigationStart;
            const domReadyTime = perfData.domContentLoadedEventEnd - perfData.navigationStart;
            
            // Send performance data to analytics if available
            if (loadTime > 0 && window.APP_CONFIG) {
              const apiUrl = window.APP_CONFIG.API_BASE_URL;
              if (apiUrl) {
                fetch(apiUrl + '/api/analytics/event', {
                  method: 'POST',
                  headers: { 'Content-Type': 'application/json' },
                  body: JSON.stringify({
                    type: 'performance_metrics',
                    eventName: 'page_performance',
                    sessionId: 'performance_' + Date.now(),
                    page: window.location.pathname,
                    eventData: {
                      loadTime: loadTime,
                      domReadyTime: domReadyTime,
                      url: window.location.href,
                      userAgent: navigator.userAgent,
                      connection: navigator.connection ? navigator.connection.effectiveType : 'unknown'
                    },
                    timestamp: new Date().toISOString()
                  })
                }).catch(() => {}); // Silent fail for analytics
              }
            }
          }, 0);
        });
      }
      
      // Global error handler
      window.addEventListener('error', function(e) {
        if (window.APP_CONFIG) {
          const apiUrl = window.APP_CONFIG.API_BASE_URL;
          if (apiUrl) {
            fetch(apiUrl + '/api/analytics/event', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({
                type: 'error',
                eventName: 'javascript_error',
                sessionId: 'error_' + Date.now(),
                page: window.location.pathname,
                eventData: {
                  errorMessage: e.message,
                  errorStack: e.error?.stack,
                  filename: e.filename,
                  lineno: e.lineno,
                  colno: e.colno,
                  url: window.location.href
                },
                timestamp: new Date().toISOString()
              })
            }).catch(() => {}); // Silent fail for error tracking
          }
        }
      });

      // Unhandled promise rejection handler
      window.addEventListener('unhandledrejection', function(e) {
        if (window.APP_CONFIG) {
          const apiUrl = window.APP_CONFIG.API_BASE_URL;
          if (apiUrl) {
            fetch(apiUrl + '/api/analytics/event', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({
                type: 'error',
                eventName: 'promise_rejection',
                sessionId: 'error_' + Date.now(),
                page: window.location.pathname,
                eventData: {
                  reason: e.reason?.toString(),
                  url: window.location.href
                },
                timestamp: new Date().toISOString()
              })
            }).catch(() => {}); // Silent fail for error tracking
          }
        }
      });

      // Initialize AdSense after page load
      window.addEventListener('load', function() {
        // AdSense initialization is handled by the AdSense component
        console.log('ðŸš€ Page loaded, AdSense components will initialize');
      });
    </script>

    <!-- âœ… ENHANCED: Comprehensive Error Suppression Script -->
    <script>
    (function() {
      // Store original console methods
      const originalError = console.error;
      const originalWarn = console.warn;
      
      // Override console.error for specific errors
      console.error = function(...args) {
        // Suppress analytics JSON parse errors
        if (args[0] && typeof args[0] === 'string' && 
            args[0].includes('Failed to execute') && 
            args[0].includes('json') && 
            args[0].includes('Response')) {
          return;
        }
        
        // Suppress analytics 400 errors
        if (args[0] && typeof args[0] === 'object' && args[0].message) {
          const errorObj = args[0];
          if (errorObj.message.includes('Missing required fields') ||
              errorObj.message.includes('Unexpected end of JSON input') ||
              errorObj.message.includes('400 (Bad Request)')) {
            return;
          }
        }

        // Filter out AdSense 400 errors and script loading errors
        if (args[0] && typeof args[0] === 'string') {
          const message = args[0];
          if (message.includes('Failed to load resource') && 
              (message.includes('googleads') || message.includes('googlesyndication'))) {
            return; // Suppress AdSense network errors
          }
          if (message.includes('AdSense: Error loading ad') || 
              message.includes('AdSense script not loaded')) {
            return; // Suppress AdSense initialization errors
          }
          if (message.includes('net::ERR_NAME_NOT_RESOLVED') && 
              message.includes('googlesyndication')) {
            return; // Suppress DNS resolution errors for AdSense
          }
        }
        
        originalError.apply(console, args);
      };

      // Override console.warn for specific warnings
      console.warn = function(...args) {
        // Suppress third-party cookie warnings
        if (args[0] && typeof args[0] === 'string' && 
            args[0].includes('Third-party cookies')) {
          return;
        }
        
        // Suppress preload warnings
        if (args[0] && typeof args[0] === 'string' && 
            args[0].includes('preload') && 
            args[0].includes('not used')) {
          return;
        }

        // Suppress analytics warnings
        if (args[0] && typeof args[0] === 'string') {
          const message = args[0];
          if (message.includes('Analytics API Error') ||
              message.includes('Analytics Request Failed') ||
              message.includes('Analytics API request failed') ||
              message.includes('Page view tracking failed')) {
            return;
          }
        }

        // Suppress event tracking JSON errors
        if (args[0] && typeof args[0] === 'string' && 
            args[0].includes('Event tracking failed') && 
            args[0].includes('Unexpected end of JSON input')) {
          return;
        }
        
        originalWarn.apply(console, args);
      };

      // Enhanced consent management
      window.addEventListener('load', function() {
        // Set a default consent if not set (for non-EEA users)
        if (!localStorage.getItem('cookieConsent')) {
          try {
            // More robust EEA detection
            const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
            const isEEA = timezone && (
              timezone.includes('Europe') || 
              timezone.includes('London') || 
              timezone.includes('Paris') ||
              timezone.includes('Berlin') ||
              timezone.includes('Rome')
            );
            
            if (!isEEA) {
              localStorage.setItem('cookieConsent', 'true');
              console.log('ðŸŒ Auto-consent applied for non-EEA user in timezone:', timezone);
            }
          } catch (error) {
            // Fallback: set consent if timezone detection fails
            localStorage.setItem('cookieConsent', 'true');
            console.log('ðŸŒ Auto-consent applied (timezone detection failed)');
          }
        }
      });

      // AdSense fallback initialization
      let adsenseRetryCount = 0;
      const maxAdsenseRetries = 3;
      
      function initializeAdSenseFallback() {
        if (adsenseRetryCount >= maxAdsenseRetries) return;
        
        setTimeout(() => {
          if (window.adsbygoogle && Array.isArray(window.adsbygoogle)) {
            try {
              window.adsbygoogle.push({});
              console.log('âœ… AdSense fallback initialization successful');
            } catch (e) {
              adsenseRetryCount++;
              if (adsenseRetryCount < maxAdsenseRetries) {
                initializeAdSenseFallback();
              }
            }
          }
        }, 2000 * (adsenseRetryCount + 1)); // Exponential backoff
      }

      // Start AdSense fallback after page load
      window.addEventListener('load', function() {
        setTimeout(initializeAdSenseFallback, 1000);
      });
    })();
    </script>

    <!-- âœ… Schema.org for Current Page -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": "Wilson Muita - Technology, Programming & Web Development Blog",
      "description": "Expert insights on web development, programming tutorials, and technology trends. Learn React, Node.js, JavaScript and more.",
      "url": "https://wilsonmuita.com",
      "lastReviewed": "2025-01-01",
      "reviewedBy": {
        "@type": "Person",
        "name": "Wilson Muita"
      }
    }
    </script>
  </body>
</html>